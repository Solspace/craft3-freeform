{% extends "freeform-demo/_layout" %}
{% set pageTitle = "Extras" %}
{% set page = "extras" %}

{# Replace "deliveryDate" with your form handle #}
{% set form = craft.freeform.form("deliveryDate") %}



{% block content %}

<div class="container">

    <h2>Date Picker Event</h2>
    <p>The following example shows how flatpickr works together with DateTime field type.<p>
    <hr />

    {% if form %}

        <h3>{{ form.name }}</h3>
        <br />

        {{ form.render() }}

        <script>
        
            {# Replace flatpckr instance options as you wish #}
            document.addEventListener("flatpickr-before-init", (event) => {

                event.options.static = true;
                event.options.clickOpens = true;
                event.options.dateFormat = "d-m-Y h:i K",
                event.options.minDate = "today",
                event.options.maxDate = new Date().fp_incr(14),
                event.options.minTime = "08:00",
                event.options.maxTime = "17.00",
                event.options.defaultHours = 8;
                event.options.disable = [
                    // disable Sundays and Saturdays from being available options in datepicker
                    function(date) {
                        return (date.getDay() === 0 || date.getDay() === 6);
                    }
                ];
                flatpickr.l10ns.default.firstDayOfWeek = 1;
            })    

            {# You can acces "event.flatpickr" property of the event object #}
            document.addEventListener("flatpickr-ready", (event) => {

                var instance = event.flatpickr;

                var input = instance.input;

                // Add bootstrap css classes t the parent element
                // to be able to use "static: true" flatpickr config option 
                input.parentNode.classList.add("form-control");
                input.classList.remove("form-control");
                input.style.border = "none";
                input.style.margin = "0px";
                input.style.padding = "0px";
                input.style.width = "100%";
                input.style.outline = "none";
            })

        </script>

    {% else %}
    {# Show instructions to developer if they wish to see this page work correctly #}

        <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading">You can't see this page correctly until...</h4>
            <p class="mb-0">
                In order to view this page live, you'll need to make some adjustments to this template or your test form:
                <ol class="mb-0">
                    <li>Rename your test form handle to <code>deliveryDate</code> (or adjust the handle name this template is looking for).</li>
                    <li>
                        Make sure your test form includes the following fields (at minimum):
                        <ul>
                            <li>Card Number number field type with handle of <code>cardNumber</code>.</li>
                            <li>Expire date text field with handle of <code>expireDate</code>.</li>
                            <li>City text field with handle of <code>city</code>.</li>
                            <li>Zip code text field with handle of <code>zipCode</code>.</li>
                            <li>Date with "Date&Time"field type with handle of <code>date</code>.</li>
                        </ul>
                    </li>
                    <li>The person viewing this form is logged into their Craft account to see this working.</li>
                    <li>The person viewing this form have a first and last name set in their User account.</li>
                </ol>
            </p>
        </div>

    {% endif %}

</div>

{% endblock %}