{% extends "freeform-demo/_layout" %}
{% set pageTitle = "Extras" %} 
{% set page = "extras" %} 

{# Replace 'multiPage' with your form handle. #}
{% set form = craft.freeform.form("multiPage") %}


{% block content %} 

<div class="container">

    <h2>Multi-page form</h2>
    <p>The example showing the iterating through pages</p>
    <hr />

    {% if form %}

        <h3> {{ form.name }}</h3> 
        <br />

        {# Replace "freeform-demo/extras/multi-page" where to return after the form will be submitted #}
        {{ form.renderTag({returnUrl:"freeform-demo/extras/multi-page"}) }}

        {% if form.hasErrors %}
            <div class: "freeform-form-has-errors"> 
                {{ "there was an error submiting this form"|t }}

                {% if form.errors|length %}
                    <ul> 
                        {% for error in form.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul> 
                {% endif %}
            </div> 
        {% endif %}
        
        {# Set up your needed form page fields #}
        {% set firstName = form.get ("firstName") %}
        {% set lastName = form.get ("lastName") %}
        {% set companyName = form.get ("companyName") %}
        {% set city = form.get ("city") %}
        {% set email = form.get ("email") %}
        {% set address = form.get ("address") %}
        {% set website = form.get ("website") %}
        {% set zipCode = form.get ("zipCode") %}

        <ul class="formPages">
            {% if form.currentPage.index == 0 %}
                <li><b>First page</b></li>
            {% elseif form.currentPage.index == 1 %}
                <li><b>Second page</b></li>
            {% endif %}
        </ul>

        {% if form.currentPage.index == 0 %}
            <label>{{ firstName.label }}</label>
            <input name="{{ firstName.handle }}" value="{{ firstName.value }}" />
            {{ firstName.renderErrors() }}

            <label>{{ lastName.label }}</label>
            <input name="{{ lastName.handle }}" value="{{ lastName.value }}" />
            {{ lastName.renderErrors() }}

            <label>{{ city.label }}</label>
            <input name="{{ city.handle }}" value="{{ city.value }}" />
            {{ city.renderErrors() }}

            <label>{{ email.label }}</label>
            <input name="email" />
            {{ email.renderErrors() }}

            <button type="submit">Continue</button>

        {% elseif form.currentPage.index == 1 %}
            {{ companyName.renderLabel() }}        
            {{ companyName.renderInput() }}

            <label>{{ address.label }}</label>
            <input name="{{ address.handle }}" value="{{ address.value }}" />
            {{ address.renderErrors() }}

            <label>{{ website.label }}</label>
            <input name="{{ website.handle }}" value="{{ website.value }}" />
            {{ website.renderErrors() }}

            <label>{{ zipCode.label }}</label>
            <input name="{{ zipCode.handle }}" value="{{ zipCode.value }}" />
            {{ zipCode.renderErrors() }}

            <button class="pageBtn" type="submit">Previus</button>
            <button class="pageBtn" type="submit">Finish</button>

        {% endif %}

    {% else %}
    {# Show instructions to developer if they wish to see this page work correctly #}

        <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading">You can't see this page correctly until...</h4>
            <p class="mb-0">
                In order to view this page live, you'll need to make some adjustments to this template or on your test from:
                <ol class="mb-0">
                    <li>Rename your test form handle to <code>multiPage</code> ( or adjust the handle name this template is looking for).</li>
                    <li>
                        Make sure your t est form includes the following fields (at minimum):
                        <ul>
                            <li>First Name text field with handle of <code>firstName</code>.</li> 
                            <li>Last Name text field with handle of <code>LastName</code>.</li>
                            <li>City text field with handle of <code>city</code>.</li>
                            <li>Email address field with handle of  <code>email</code>.</li>
                        </ul>
                    </li>
                    <li>The person viewing this form is logged into their Craft account to see this working.</li>
                    <li>The person viewing this form have a first and last name set in their User account.</li>
                </ol>
            </p>
        </div>
    
    {% endif %}

</div>

{% endblock %} 